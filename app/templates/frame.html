<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Medusa</title>

    <!-- CSS Rules -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:regular,bold,italic,thin,light,bolditalic,black,medium&amp;lang=en">
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.green-light_blue.min.css">
    <link rel="shortcut icon" href="{{ url_for('static', filename='favicon.ico') }}">
    <script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>
    <script type="text/javascript" src="{{ url_for('static', filename='jquery.js') }}"></script>
    <script type="text/javascript" src="{{ url_for('static', filename='list.min.js') }}"></script>
    <script type=text/javascript>
      $SCRIPT_ROOT = {{ request.script_root|tojson|safe }};
    </script>

    <!-- refresh pages every 5 min - maybe better way to keep information up to date? -->
    <meta http-equiv="refresh" content="300" />

    <!-- Display flashes -->
    {% with messages = get_flashed_messages() %}
      {% if messages %}
        <script>
          var messages = {{ messages | safe }};
          for (var i=0; i<messages.length; i++) {
            alert(messages[i]);
          }
        </script>
      {% endif %}
    {% endwith %}

  </head>

  <body>
    <div class="mdl-layout mdl-js-layout mdl-layout--fixed-header">
      <header class="mdl-layout__header">
        <div class="mdl-layout__header-row">
          <span class="mdl-layout-title">
            {% if allsites == True %}
            <h3>Sites Overview</h3>
            {% else %}
            <h3>{{site.name}}</h3>
            {% endif %}
          </span>
          <div class="mdl-layout-spacer"></div>
          <!-- Navigation -->
          <nav class="mdl-navigation">
            {% if allsites == True %}
            <a class="mdl-navigation__link" href="/site/all/dashboard">Dashboard</a>
            <a class="mdl-navigation__link" href="/site/all/weather">Weather</a>
            <a class="mdl-navigation__link" href="/site/all/sites">Sites</a>
            <a class="mdl-navigation__link" href="/site/all/unresolved">Unresolved Issues</a>
            <a class="mdl-navigation__link" href="/site/all/issue-chart">Issue Chart</a>
            <a class="mdl-navigation__link" href="/site/all/map">Map</a>
            <a class="mdl-navigation__link" href="/site/all/add_site">Add Site</a>
            <a class="mdl-navigation__link" href="/site/all/add_subtype">Add Subtype</a>
            <a class="mdl-navigation__link" href="/admin">Admin</a>
            {% else %}
            <a class="mdl-navigation__link" href="/site/{{site.name}}/dashboard">Dashboard</a>
            <a class="mdl-navigation__link" href="/site/{{site.name}}/assets">Asset List</a>
            <a class="mdl-navigation__link" href="/site/{{site.name}}/unresolved">Unresolved Issues</a>
            <a class="mdl-navigation__link" href="/site/{{site.name}}/add_asset">Add Asset</a>
            {% endif %}
          </nav>
        </div>
      </header>
      <main class="mdl-layout__content" style="flex: 1 0 auto;">
        {% block layout %}{% endblock %}
      </main>
      <footer class="mdl-mini-footer">
        <div class="mdl-mini-footer__left-section">
          <div class="mdl-logo">More Information</div>
          <ul class="mdl-mini-footer__link-list">
            <li><a href="#">Help</a></li>
            <li><a href="#">Privacy & Terms</a></li>
          </ul>
          &copy; Copyright Schneider Electric 2017
        </div>
      </footer>
    </div>
  </body>
</html>